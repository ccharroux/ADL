<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,700,900' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="../../css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="../../css/icomoon.css">
    <!-- Simple Line Icons -->
    <link rel="stylesheet" href="../../css/simple-line-icons.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="../../css/bootstrap.css">
    <!-- Theme style  -->
    <link rel="stylesheet" href="../../css/style.css">
    <!-- Modernizr JS -->
    <script src="../../js/modernizr-2.6.2.min.js"></script>

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.2/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css" />
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <style>
      /*  td, tr, table
        {
            border:silver 1px solid;
            text-align: center;
            border-radius: 15px;

        }
        td
        {
            width: 50%;
            height: 240px;
            vertical-align: middle!important;
        }*/
        dt {
            float: left;
            padding: 4px;
        }

        .productDiv {
            display: none;
            margin-top: 20px;
            border-radius: 15px;
            border: silver 1px solid;
            width: 50%;
        }

        .textAlignLeft {
            text-align: left;
            margin-left: 10px;
        }

        .textAlignRight {
            text-align: right;
            margin-right: 10px;
        }

        .mediaHeader {
            color: blue;
            font-weight: 800;
        }

        .top-title {
            /*margin: 0;
            padding: 0;*/
        }

        .bottom-url {
            padding-left: 20px;
            /*line-height: 1em;
            margin: 0;
            padding-top: 0;*/
        }
 
    </style>
</head>
<body>
    <div id="fh5co-page">
        <header id="fh5co-header" role="banner">
            <div class="container">
                <div class="header-inner" id="menu"></div>
            </div>
        </header>
        <div id="fh5co-contact-section" class="contact-section">
            <div class="margin-0-auto text-align-center">
                <center>
                    <!--<div id="divFavoriteList" style="padding-top:20px; padding-bottom:20px;display:none;width:90%;border:solid 1px silver;border-radius:15px"></div>-->
                    <!-- start datatable coding-->
                    <div class="container">
 

                        <table style="width:100%;margin-top:30px">
                            <tr>
                                <td colspan="2"><h2 style="margin:0">My Dashboard</h2></td>
                            </tr>
                            <tr>
                                <td style="width:50%;" class="text-align-center">
                                    Number of ADLs that are <font color='red'>LATE</font><br>
                                    <div class="blink" style="font-size:96px; color:red" id="spnADLsLate"></div>
                                    <input type="button" class="default-button smallButton" onclick="goTo('../../admin/adl care/list.html')" value="Patient Care" >
                                </td>
                                <td style="width:50%;" class="text-align-center">
                                    Number of ADLs that need to be done today<br>
                                    <div style="font-size:96px;" id="spnADLsNotCompleted"></div>
                                    <input type="button" class="default-button smallButton" onclick="goTo('../../admin/adl care/list.html')" value="Patient Care" >
                                </td>
                            </tr>
                        </table>

                        <div class="dataTable-top-margin">
                            <table id="dt" class="dataTable-border dataTable-headers dataTable-cell-border">
                                <thead>
                                    <tr>
                                        <th class="exportColumn">Transaction Time</th>
                                        <th class="exportColumn">Patient</th>
                                        <th class="exportColumn">ADL</th>
                                        <th class="exportColumn">Caregiver</th>
                                        <th class="exportColumn">Scheduled Time</th>
                                        <th class="exportColumn">Difference</th>
                                        <th></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                        <!-- end datatable -->
                    </div>
                    <!-- end datatable coding-->

                </center>
            </div>
        </div>
        <!--<div id="map" data-animate-effect="fadeIn"></div>-->
    </div>

    <!-- jQuery -->
    <script src="../../js/jquery.min.js"></script>
    <!-- jQuery Easing -->
    <script src="../../js/jquery.easing.1.3.js"></script>
    <!-- Bootstrap -->
    <script src="../../js/bootstrap.min.js"></script>
    <!-- Bootbox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
    <!-- Waypoints -->
    <script src="../../js/jquery.waypoints.min.js"></script>
    <!-- BlockUI JS -->
    <script src="../../js/blockUI.js"></script>
    <!-- Config JS -->
    <script src="../../js/config.js"></script>
    <!-- MAIN JS -->
    <script src="../../js/main.js"></script>


    <script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.colVis.min.js"></script>

</body>
</html>
<script>


    $(document).ready(function () {

        buildMainMenu("");
        buildDashboard();
        setDataTable();
        
    });
    function setDataTable() 
    {
    
        var reportTitle = "Patient Care";
        var exportColumns = returnTableColumnsByClass("dt", "exportColumn");



        $("#dt").DataTable({
            "dom": "Blfrtip",
            "pageLength": gDataTableDefaultRows,
            "data": [],
            "columns": [
                {
                    "data": 'TransactionDate',
                    "className": "text-align-left"
                },
                {
                    "data": 'Patient',
                    "className": "text-align-left"
                },
                {
                    "data": 'SystemADL',
                    "className": "text-align-left"
                },
                {
                    "data": 'UserName',
                    "className": "text-align-left"
                },
                {
                    "data": 'TimeOfDay',
                    "className": "text-align-left"
                },
                {

                    mRender: function (data, type, row) {

                        var action = "calculation goes here";
                        return action;
                    },
                    "orderable": true,
                    "searchable": true,
                    "className": "text-align-center"
                },
                {
                    mRender: function (data, type, row) {

                        var action = '';
                            action = action + "<a href='#' onclick='patientCare(" + row.PateintId + ");'>Patient Care</a><br>";
                            action = action + "<a href='#' onclick='patientScheduling(" + row.PateintId + ");'>Patient Schedule</a><br>";
                            action = action + "<a href='#' onclick='patienceMaintenance(" + row.PateintId + ");'>Patient Maintenance</a>";

                        return action;
                    },
                    "orderable": false,
                    "searchable": false,
                    "className": "text-align-center"
                }
            ],
            "pagingType": "full_numbers",
            "buttons": [
 
               {
                   extend: 'excel',
                   title: reportTitle,
                   exportOptions: {
                       columns: exportColumns,
                       format: {
                           header: function (data, columnIdx) {
                               return returnExportColumnHeadingTitle("dt", data, columnIdx);
                           }
                       }
                   }
               },
  
               {
                   extend: 'pdf',
                   title: reportTitle,
                   exportOptions: {
                       columns: exportColumns,
                       format: {
                           header: function (data, columnIdx) {
                               return returnExportColumnHeadingTitle("dt", data, columnIdx);
                           }
                       }
                   }
               },
               {
                   extend: 'print',
                   title: reportTitle,
                   exportOptions: {
                       columns: exportColumns,
                       format: {
                           header: function (data, columnIdx) {
                               return returnExportColumnHeadingTitle("dt", data, columnIdx);
                           }
                       }
                   }
               }
               //,
               //this button is supposed to handle column visibility
               //however it isn't working on our site
               //'colvis'
            ],
            initComplete: function () {
                $(".dataTables_filter").append('<button type="button" class="clear-button" id="clear_search_button"><img width="29" height="29" src="../../images/red-x.png" /></button>');
            },
            createdRow: function (row, data, index) {
                //this adds the class to every row
                $(row).addClass('single-line-height');
            },
            language: {
                //this changes search box label from Search: to Filter Results:
                search: "Filter Results:"
            }
        });

    }
    function getFacilityDashboardDataByDay()
    {
        var thisFacilityId = getFacilityFromControl("ddlFacilityAccess");

        getFacilityDashboardDataByDayAPICall(thisFacilityId, currentDate());
    }

    function getFacilityDashboardDataByDaySuccess(data, textStatus, jQxhr)
    {
        
        if (data.response.status != "SUCCESS") 
        {
            bootbox.alert('Process Failed.\n\r\n\r' + data.response.errorMessage[0], function () { });
        } 
        else 
        {        
            $("#spnADLsLate").html(data.ADLsLate);    
            $("#spnADLsNotCompleted").html(data.ADLsNotCompleted);
         }
    }
    function getFacilityADLLogByDay()
    {
        var thisFacilityId = getFacilityFromControl("ddlFacilityAccess");

        getFacilityADLLogByDayAPICall(thisFacilityId, currentDate());   
    }

    function getFacilityADLLogByDaySuccess(data, textStatus, jQxhr)
    {
        console.log(data);
        populateDataTable("dt", data);
    }

    function drawSegmentLabel(canvas, context, i) {
        context.save();
        var x = Math.floor(canvas.width / 2);
        var y = Math.floor(canvas.height / 2);
        var angle = degreesToRadians(sumTo(data, i));

        context.translate(x, y);
        context.rotate(angle);
        var dx = Math.floor(canvas.width * 0.5) - 10;
        var dy = Math.floor(canvas.height * 0.05);

        context.textAlign = "right";
        var fontSize = Math.floor(canvas.height / 25);
        context.font = fontSize + "pt Helvetica";

        context.fillText(labels[i], dx, dy);

        context.restore();
    }
    function degreesToRadians(degrees) {
        return (degrees * Math.PI) / 180;
    }
    function sumTo(a, i) {
        var sum = 0;
        for (var j = 0; j < i; j++) {
            sum += a[j];
        }
        return sum;
    }
    function drawSegment(canvas, context, i) {
        context.save();
        var centerX = Math.floor(canvas.width / 2);
        var centerY = Math.floor(canvas.height / 2);
        radius = Math.floor(canvas.width / 2);

        var startingAngle = degreesToRadians(sumTo(data, i));
        var arcSize = degreesToRadians(data[i]);
        var endingAngle = startingAngle + arcSize;

        context.beginPath();
        context.moveTo(centerX, centerY);
        context.arc(centerX, centerY, radius,
                    startingAngle, endingAngle, false);
        context.closePath();

        context.fillStyle = colors[i];
        context.fill();

        context.restore();

        drawSegmentLabel(canvas, context, i);
    }

</script>